#### 处理NULL

##### ISNULL

传递两个参数，如果参数1为空，那么返回参数2

ISNULL 函数不是 ANSI 标准函数

```sql
SELECT ISNULL(null,'张三') 
-- 张三
```

##### COALESCE

更灵活，可以传递多个表达式，但返回的数据类型都应该是相同或兼容的

```sql
SELECT COALESCE(null,'张三',null)
SELECT COALESCE(null,null,'张三')
-- 这些表达式都返回张三
```

##### NULLIF

传递两个参数，如果这两个参数相等，将返回NULL

```sql
SELECT NULLIF('张三','张三') -- NULL
```

#### 排序（ORDER BY）

排序可用元素

* 按照列名排序
* 按照列的别名排序
* 按自增列排序
* 列未出现在SELECT的列表中，可以从 FROM 子句中的表获取

示例：

以下咱们假设存在一个 `Production.Product` 表，我们对他的 `Category` 升序排序，对 `Price` 降序排序。

注：排序顺序是按第一列的顺序返回，然后依次按其他每个列进行次排序

```sql
SELECT ProductCategoryID AS Category, ProductName
FROM Production.Product
ORDER BY Category ASC, Price DESC;
```

#### 限制排序结果（TOP）

TOP 子句不是 ANSI 标准函数，是T-SQL的扩展子句

示例：

```sql
-- 返回最贵的10个商品
SELECT TOP 10 Name, ListPrice
FROM Production.Product
ORDER BY ListPrice DESC;
```

##### WITH TIES

将返回与 `TOP子句` 最后一行的 `ORDER BY`相同的行

例：通过 `top 1` 获取最贵的商品时，还有两个同价的商品，`WITH TIES` 就是做这个的

```sql
SELECT TOP 1 WITH TIES Name, ListPrice
FROM Production.Product
ORDER BY ListPrice DESC;
```

#### OFFSET-FETCH

该语句在 `sqlserver2012` 后引入

```sql
SELECT ProductID, ProductName, ListPrice
FROM Production.Product
ORDER BY ListPrice DESC 
OFFSET 10 ROWS -- 跳过10行
FETCH NEXT 10 ROWS ONLY; -- 获取下10行
```

