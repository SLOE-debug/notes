#### SQL结构

SQL广泛的指`ANSI SQL标准`，每个`关系型数据库`厂家都需要实现该标准。但很多厂家在其基础上进行了扩展，我们要学的`Transact-SQL 或 T-SQL`可以理解为SQL的一种`方言`。

SQL结构分为3大类：

* DML（数据库操作语言）

  > 侧重于查询和修改数据的 SQL 语句集，包括 SELECT、INSERT、UPDATE、DELETE 等语句

* DDL（数据定义语言）

  > 处理数据库对象（例如表、视图和过程）定义和生命周期的 SQL 语句集。 包括 CREATE、ALTER、DROP 等语句
  
* DCL（数据控制语言）

  > 用于管理用户和对象安全权限的 SQL 语句集。 包括 GRANT、REVOKE、DENY 等语句。

#### SELECT执行顺序

```sql
SELECT OrderDate, COUNT(OrderID) AS Orders
FROM Sales.SalesOrder
WHERE Status = 'Shipped'
GROUP BY OrderDate
HAVING COUNT(OrderID) > 1
ORDER BY OrderDate DESC;
```

1. 计算 FROM 子句，创建出一个虚拟表传递给下一步
2. 计算 WHERE 子句，将筛选过的表传递给下一步
3. 计算 GROUP BY 字句，将虚拟表中的符合 GROUP BY 的值组成一个包含组的新虚拟表，传递给下一步。（从此步开始，后续子句只能引用 GROUP BY 中的列和聚合函数）
4. 计算 HAVING 子句，将筛选过得表传递给下一步
5. 执行 SELECT 子句，返回需要的行。（因为SELECT子句在最后计算，因此在SELECT中定义的别名列无法在 该子句之前的子句 中使用）
6. 最后执行 ORDER BY，对表进行行排序

实际执行顺序

```sql
FROM Sales.SalesOrder
WHERE Status = 'Shipped'
GROUP BY OrderDate 
HAVING COUNT(OrderID) > 1
SELECT OrderDate, COUNT(OrderID) AS Orders
ORDER BY OrderDate DESC;
```

